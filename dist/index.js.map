{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { Component } from 'preact';\nimport { Subscription } from 'rxjs';\n\nexport const ConnectionState = {\n    active: 'active',\n    done: 'done',\n    none: 'none',\n    values: 'values',\n    waiting: 'waiting'\n};\n\nexport class StreamBuilder extends Component {\n\n    constructor(props) {\n        this._subscription = Subscription.EMPTY;\n\n        this.state = {\n            data: props.initialData,\n            state: ConnectionState.none\n        };\n    }    \n\n    componentDidMount() {\n        this.setState(() => ({ state: ConnectionState.waiting }));\n        this._subscription = this.props.stream.subscribe({\n            next: (data) => this.setState(() => ({ data, state: ConnectionState.active })),\n            error: () => {},\n            complete: () => this.setState(() => ({ state: ConnectionState.done }))\n        });\n    }\n\n    componentWillUnmount() {\n        this._subscription.unsubscribe();\n    }\n\n    render({ builder }, snapshot) {\n        return builder(snapshot);\n    }\n\n}\n"],"names":["ConnectionState","active","done","none","values","waiting","StreamBuilder","constructor","props","_subscription","Subscription","EMPTY","state","data","initialData","componentDidMount","setState","this","stream","subscribe","next","error","complete","componentWillUnmount","unsubscribe","render","ref","snapshot","builder","Component"],"mappings":"0CAGaA,EAAkB,CAC3BC,OAAQ,SACRC,KAAM,OACNC,KAAM,OACNC,OAAQ,SACRC,QAAS,WAGAC,cAETC,WAAYC,QACHC,cAAgBC,eAAaC,WAE7BC,MAAQ,CACTC,KAAML,EAAMM,YACZF,MAAOZ,EAAgBG,sGAI/BY,6CACSC,2BAAkBJ,MAAOZ,EAAgBK,gBACzCI,cAAgBQ,KAAKT,MAAMU,OAAOC,UAAU,CAC7CC,cAAOP,UAASI,EAAKD,gCAAkBH,EAAMD,MAAOZ,EAAgBC,WACpEoB,mBACAC,2BAAgBL,EAAKD,2BAAkBJ,MAAOZ,EAAgBE,wBAItEqB,qCACSd,cAAce,2BAGvBC,gBAAOC,EAAaC,UACTC,aAAQD,OAzBYE"}