{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["/* eslint-disable react/no-did-mount-set-state */\nimport { Component } from 'preact';\nimport { Subscription } from 'rxjs';\n\nexport const ConnectionState = {\n\tactive: 'active',\n\tdone: 'done',\n\tnone: 'none',\n\tvalues: 'values',\n\twaiting: 'waiting'\n};\n\nexport class StreamBuilder extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._subscription = Subscription.EMPTY;\n\n\t\tthis.state = {\n\t\t\tdata: props.initialData,\n\t\t\tstate: ConnectionState.none\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState(() => ({ state: ConnectionState.waiting }));\n\t\tthis._subscription = this.props.stream.subscribe({\n\t\t\tnext: (data) => this.setState(() => ({ data, state: ConnectionState.active })),\n\t\t\terror: () => {},\n\t\t\tcomplete: () => this.setState(() => ({ state: ConnectionState.done }))\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._subscription.unsubscribe();\n\t}\n\n\trender({ builder }, snapshot) {\n\t\treturn builder(snapshot);\n\t}\n\n}\n"],"names":["ConnectionState","active","done","none","values","waiting","StreamBuilder","constructor","props","_subscription","Subscription","EMPTY","state","data","initialData","componentDidMount","setState","this","stream","subscribe","next","error","complete","componentWillUnmount","unsubscribe","render","ref","snapshot","builder","Component"],"mappings":"mQAIaA,EAAkB,CAC9BC,OAAQ,SACRC,KAAM,OACNC,KAAM,OACNC,OAAQ,SACRC,QAAS,WAGGC,cAEZC,WAAYC,eACLA,QACDC,cAAgBC,eAAaC,WAE7BC,MAAQ,CACZC,KAAML,EAAMM,YACZF,MAAOZ,EAAgBG,sGAIzBY,6CACMC,2BAAkBJ,MAAOZ,EAAgBK,gBACzCI,cAAgBQ,KAAKT,MAAMU,OAAOC,UAAU,CAChDC,cAAOP,UAASI,EAAKD,gCAAkBH,EAAMD,MAAOZ,EAAgBC,WACpEoB,mBACAC,2BAAgBL,EAAKD,2BAAkBJ,MAAOZ,EAAgBE,wBAIhEqB,qCACMd,cAAce,2BAGpBC,gBAAOC,EAAaC,UACZC,aAAQD,OA1BkBE"}